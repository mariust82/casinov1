!function(f){f.fn.cardtable=function(t){var i=f.extend({},{headIndex:0},t);return t&&t.headIndex?t.headIndex:0,this.each(function(){var t=f(this);if(!t.hasClass("stacktable")){var s=f(this).prop("class"),a=f("<div></div>");void 0!==i.myClass&&a.addClass(i.myClass);var d,e,l,n,r="";t.addClass("stacktable large-only"),d=t.find(">caption").clone(),e=t.find(">thead>tr,>tbody>tr,>tfoot>tr,>tr").eq(0),t.siblings().filter(".small-only").remove(),t.find(">tbody>tr").each(function(){l="",n=f(this).prop("class"),f(this).find(">td,>th").each(function(t){""!==f(this).html()&&(l+='<tr class="'+n+'">',e.find(">td,>th").eq(t).html()?l+='<td class="st-key">'+e.find(">td,>th").eq(t).html()+"</td>":l+='<td class="st-key"></td>',l+='<td class="st-val '+f(this).prop("class")+'">'+f(this).html()+"</td>",l+="</tr>")}),r+='<table class=" '+s+' stacktable small-only"><tbody>'+l+"</tbody></table>"}),t.find(">tfoot>tr>td").each(function(t,a){""!==f.trim(f(a).text())&&(r+='<table class="'+s+' stacktable small-only"><tbody><tr><td>'+f(a).html()+"</td></tr></tbody></table>")}),a.prepend(d),a.append(f(r)),t.before(a)}})},f.fn.stacktable=function(t){var o,c=f.extend({},{headIndex:0,displayHeader:!0},t);return o=t&&t.headIndex?t.headIndex:0,this.each(function(){var t=f(this).prop("class"),a=f('<table class="'+t+' stacktable small-only"><tbody></tbody></table>');void 0!==c.myClass&&a.addClass(c.myClass);var s,d,e,l,n,r,i,h="";(s=f(this)).addClass("stacktable large-only"),d=s.find(">caption").clone(),e=s.find(">thead>tr,>tbody>tr,>tfoot>tr").eq(0),i=void 0===s.data("display-header")?c.displayHeader:s.data("display-header"),s.find(">tbody>tr, >thead>tr").each(function(t){n=l="",r=f(this).prop("class"),0===t?i&&(h+='<tr class=" '+r+' "><th class="st-head-row st-head-row-main" colspan="2">'+f(this).find(">th,>td").eq(o).html()+"</th></tr>"):(f(this).find(">td,>th").each(function(t){t===o?l='<tr class="'+r+'"><th class="st-head-row" colspan="2">'+f(this).html()+"</th></tr>":""!==f(this).html()&&(n+='<tr class="'+r+'">',e.find(">td,>th").eq(t).html()?n+='<td class="st-key">'+e.find(">td,>th").eq(t).html()+"</td>":n+='<td class="st-key"></td>',n+='<td class="st-val '+f(this).prop("class")+'">'+f(this).html()+"</td>",n+="</tr>")}),h+=l+n)}),a.prepend(d),a.append(f(h)),s.before(a)})},f.fn.stackcolumns=function(t){var e=f.extend({},{},t);return this.each(function(){var t=f(this),a=t.find(">caption").clone(),s=t.find(">thead>tr,>tbody>tr,>tfoot>tr").eq(0).find(">td,>th").length;if(!(s<3)){var d=f('<table class="stacktable small-only"></table>');void 0!==e.myClass&&d.addClass(e.myClass),t.addClass("stacktable large-only");for(var n=f("<tbody></tbody>"),r=1;r<s;)t.find(">thead>tr,>tbody>tr,>tfoot>tr").each(function(t){var a=f("<tr></tr>");0===t&&a.addClass("st-head-row st-head-row-main");var s=f(this).find(">td,>th").eq(0).clone().addClass("st-key"),d=r;if(f(this).find("*[colspan]").length){var e=0;f(this).find(">td,>th").each(function(){var t=f(this).attr("colspan");if(t?(t=parseInt(t,10),d-=t-1,r<e+t&&(d+=e+t-r-1),e+=t):e++,r<e)return!1})}var l=f(this).find(">td,>th").eq(d).clone().addClass("st-val").removeAttr("colspan");a.append(s,l),n.append(a)}),++r;d.append(f(n)),d.prepend(a),t.before(d)}})}}(jQuery);