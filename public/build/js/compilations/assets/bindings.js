function newsletter(e){var t,o=e,a=o.find(".news-email"),n=o.find(".news-btn"),i=$("#news-success"),s=$("#news-note"),c="not-valid",r=new XMLHttpRequest;_prepMessage=function(){return t=a.val(),ok=!0,""!==t&&validateEmail(t)?a.parent().removeClass(c):(a.parent().addClass(c),ok=!1),ok?s.hide():s.show(),ok},_sendNews=function(e){r.abort(),r=$.ajax({url:"/newsletter/subscribe",data:{email:e},dataType:"json",timeout:2e4,type:"POST",success:function(e){if("ok"==e.status)i.show(),s.hide(),n.prop("disabled",!0),a.val(""),_onEvents();else if("error"==e.status){var t=JSON.parse(e.body);$(".action-added").remove(),$.each(t,function(e,t){var o='<div class="action-field action-added not-valid ">'+t+"</div>";$(".review-submit-holder .msg-holder").append(o)})}},error:function(e){console.error("Could not send message!")}})},_onEvents=function(){n.on({click:function(e){!1===_prepMessage()?e.stopPropagation():_sendNews(t)}})},_init=function(){_onEvents()},_init()}function initMobileBonusesPop(e){var i=$(".block .container"),t=$(".btn-round"),s=document.body.scrollTop;if(e<=690){t.off("click"),t.on("click",function(e){var t,n,o,a;return s=$(window).scrollTop(),$(".overlay, .loader").fadeIn("fast"),t=$(this),n=t.closest(i),o=t.data("name"),a=t.data("is-free"),(new XMLHttpRequest).abort(),$.ajax({url:"/casino/bonus",data:{casino:o,is_free:a},dataType:"html",type:"GET",success:function(e){var t=$(e).insertAfter(n);t.find(".js-tooltip").tooltipster(tooltipConfig),t.find(".js-copy-tooltip").tooltipster(copyTooltipConfig);var o=t.find(".js-mobile-pop-close");checkStringLength($(".bonus-box"),21),copyToClipboard(),$(".overlay, .loader").fadeOut("fast"),t.fadeIn("fast").fadeIn("fast");var a=$("html, body").hasClass("site__header_sticky");a&&$("html, body").removeClass("site__header_sticky"),lockScreen(),o.on("click",function(e){return $("body").addClass("site__header_sticky"),t.fadeOut("fast").find(".mobile-popup-body").html(""),unlockScreen(),a&&$("html, body").addClass("site__header_sticky"),$(".overlay, .loader").fadeOut("fast"),goToPosition(s),t.remove(),!1})}}),$("body").removeClass("site__header_sticky"),!1})}}function initSearch(){var e=$(".header-search"),t=$(".js-search-opener",e),o=$(".js-mobile-search-opener"),a=$(".js-search-close",e),n=$(".js-mobile-search-close"),i=$(".js-mobile-search-clear"),s=$(".js-search-drop"),c=$(".header-search-input input"),r=0;t.on("click",function(e){$("body").addClass("search-opened"),c.focus(),searchDropOpen(s),$(document).on("click touchstart",function(e){0==$(e.target).closest(s).length&&0==$(e.target).closest(c).length&&0==$(e.target).closest(o).length&&0==$(e.target).closest(t).length&&(c.val(""),searchDropClose(s))})}),c.on("keydown",function(e){13!=e.keyCode?(isSearchResultEvent=!0,searchDropOpen(s)):isSearchResultEvent=!1}),a.on("click",function(e){searchDropClose(s)}),o.on("click",function(e){r=$(window).scrollTop(),$("body").addClass("mobile-search-opened"),lockScreen(),c.focus()}),n.on("click",function(e){c.val("").blur(),$("body").removeClass("mobile-search-opened"),unlockScreen(),goToPosition(r)}),i.on("click",function(){c.val("").focus()}),c.on("focus",function(){goToPosition(0)}),s.on("scroll",function(e){c.blur()})}function initToggleMenu(){var e=document.querySelector(".header-menu__list-holder");if(e){var t=checkIfIsMobileDevice()?"click":"hover";e.addEventListener(t,function(e){for(var t,o=e.target;o!=this;){if(o.classList.contains("expand-holder")){(t=document.querySelector(".expand-holder.opened"))==o?"expand-menu"!==e.target.className&&t.classList.remove("opened"):t?("expand-menu"!==e.target.className&&t.classList.remove("opened"),setTimeout(function(){o.classList.add("opened")},400)):o.classList.add("opened");break}o=o.parentNode}},!0)}}var Filters=function(e){var s,t,o=e,a=this,n=o.find("input[type=checkbox]"),i=o.find("input[type=radio]"),c=o.find("select[name=soft]"),r=$(".data-container"),l=$(".data-add-container"),d=r.data("type"),u=r.data("type-value"),f=$(".empty-filters"),p=o.next(".data-container-holder").find(".holder"),h=$("#default"),m=new XMLHttpRequest;void 0===d&&(d="game_type");var v=o.data("url");if(h.prop("checked",!0),"/games-filter/"===v){var b=new MutationObserver(function(e){var t=0;e.forEach(function(e){"childList"===e.type&&0!==e.addedNodes.length&&t<1&&(initImageLazyLoad(),t++)})});b.observe($(".data-container").get(0),{childList:!0,subtree:!0}),b.observe($(".data-add-container").get(0),{childList:!0,subtree:!0})}var g=function(e,t,o){var a={};return $.each(n,function(e,t){$(t).is(":checked")&&(a[$(t).attr("name")]=1),"reset"==o&&(a[$(t).attr("name")]="",$(t).prop("checked",!1))}),$.each(i,function(e,t){$(t).is(":checked")&&(a[$(t).attr("name")]=$(t).attr("value")),"reset"==o&&(a[$(t).attr("name")]=1,0==e&&$(t).prop("checked",!0))}),a[e]=t,"undefined"!=c.val()&&null!=c.val()&&(a.software=c.val().join(),"reset"==o&&(a.software="")),"undefined"==typeof AJAX_CUR_PAGE&&(AJAX_CUR_PAGE=1),"add"==o&&"reset"!=o||(AJAX_CUR_PAGE=0),null!=a.label&&"Mobile"==a.label&&(a.compatibility="mobile",delete a.label),a};_ajaxRequestCasinos=function(e,n){if("add"==n?s.addClass("loading"):$(".overlay, .loader").fadeIn("fast"),!BUSY_REQUEST){BUSY_REQUEST=!0,m.abort();var i="/games-filter/"==v?24:100;"/casinos"===location.pathname&&(v="load-all-casinos/"),m=$.ajax({url:v+AJAX_CUR_PAGE,data:e,dataType:"html",type:"GET",success:function(e){var t=$(e).find(".loaded-item"),o=$(e).filter("[data-load-total]").data("load-total"),a=$(".qty-items");"replace"==n?(r.html(e),l.html(""),a.attr("data-load-total",o),$(".qty-items-quantity").text(o),t.length===a.attr("data-load-total")?(0<t.length?(p.show(),f.hide()):(p.hide(),f.show()),s.hide()):(s.show(),p.show(),f.hide()),refresh(),AJAX_CUR_PAGE=1,0):(AJAX_CUR_PAGE++,0,setTimeout(function(){l.append(t),s.removeClass("loading"),refresh(),initImageLazyLoad(),t.length<i&&s.hide()},1e3)),_construct(),checkStringLength($(".data-add-container .bonus-box, .data-container .bonus-box"),21)},error:function(e){"abort"!=e.statusText&&console.log("err")},complete:function(){BUSY_REQUEST=!1,$(".overlay, .loader").fadeOut("fast"),"/casinos-filter/"===v?parseInt($(".qty-items").attr("data-load-total"))<=100?$(".js-more-items").hide():$(".js-more-items").show():"/games-filter/"===v&&(parseInt($(".qty-items-quantity").html())<=24?$(".js-more-items").hide():$(".js-more-items").show()),grayscaleIE(),initImageLazyLoad()}});var t=setTimeout(function(){},300);_hideLoading=function(){clearTimeout(t)}}},_loadData=function(e){},_construct=function(){s=$(".js-more-items"),t=$(".js-reset-items"),n.off(),n.on("click",function(){_ajaxRequestCasinos(g(d,u),"replace")}),i.off(),i.on("click",function(){_ajaxRequestCasinos(g(d,u),"replace")}),$(".js-filter > option").on("click",function(){$(".js-filter > option").each(function(e,t){$(this).prop("selected")})}),c.off(),c.on("change",function(){_ajaxRequestCasinos(g(d,u),"replace")}),s.off(),s.on("click",function(){return _ajaxRequestCasinos(g(d,u,"add"),"add"),!1}),t.off(),t.on("click",function(){return _ajaxRequestCasinos(g(d,u,"reset"),"add"),!1}),o[0].obj=a},_construct()};tooltipConfig={trigger:"click",maxWidth:279,animation:"grow",debug:!1},copyTooltipConfig={trigger:"click",maxWidth:260,minWidth:260,animation:"grow",contentAsHTML:!0,debug:!1,functionBefore:function(e,t){e.content('                <div class="centered">                    <i class="icon icon-icon_available"></i> Code copied to clipboard                </div>            ')}},contentTooltipConfig={trigger:"click",minWidth:460,interactive:!0,contentAsHTML:!0,debug:!1,content:$(".loader"),animation:"fade",contentCloning:!1,functionReady:function(){$("body").addClass("shadow"),checkStringLength($(".bonus-box"),15),$(".js-tooltip").tooltipster(tooltipConfig)},functionAfter:function(){$("body").removeClass("shadow")},functionBefore:function(t,e){var o=$(e.origin);if(!0!==o.data("loaded")){var a=o.data("name"),n=o.data("is-free"),i=new XMLHttpRequest;i.abort(),i=$.ajax({url:"/casino/bonus",data:{casino:a,is_free:n},dataType:"html",type:"GET",success:function(e){t.content(e),setTimeout(function(){s()},50),o.data("loaded",!0)}})}else setTimeout(function(){s()},50);function s(){$(".js-tooltip").tooltipster(tooltipConfig),$(".js-copy-tooltip").tooltipster(copyTooltipConfig),copyToClipboard(),checkStringLength($(".bonus-box"),15)}}};