var Vote=function(e){var i=e,t=i.find(".vote-button"),o=new XMLHttpRequest,s=function(e,t,o){return{id:t,is_like:o}},n=function(e){var t="/casino/review-like";return"article"===e&&(t="/blog/rate"),t},a=function(s,n,e){BUSY_REQUEST||(BUSY_REQUEST=!0,o.abort(),o=$.ajax({url:n,data:e,dataType:"json",type:"post",success:function(e){if("/casino/review-like"===n){if("not_ok"==e.body.status)console.log(e.body.message);else{var t=$(s).find(".bubble-vote"),o=t.text();t.text(++o)}s.closest(i).next(".action-field.success").show()}else"/blog/rate"===n&&($(s.parent().parent()).find(".votes-like .vote-block-num, .like .vote-block-num").text(e.body.likes),$(s.parent().parent()).find(".votes-dislike .vote-block-num, .dislike .vote-block-num").text(e.body.dislikes),s.closest(i).next(".action-field.success").show())},error:function(e){jQuery.parseJSON(e.responseJSON.body.message)[0];"abort"!=e.statusText&&__this.closest(i).next(".action-field.not-valid").show()},complete:function(){BUSY_REQUEST=!1}}))};t.off(),t.on("click",function(){var e=$(this).data("id"),t=$(this).data("success"),o=$(this).data("type");return a($(this),n(o),s(o,e,t)),!1})};new Vote($(".js-vote"));