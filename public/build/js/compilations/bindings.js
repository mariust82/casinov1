var ww=$(window).width(),Score=function(e){var t=e.name,o=e.value,n=new XMLHttpRequest;(function(e,t){BUSY_REQUEST||(BUSY_REQUEST=!0,n.abort(),n=$.ajax({url:"/casino/rate",data:{name:e,value:t},dataType:"json",type:"post",success:function(e){"Casino already rated!"==e.body.success&&($(".icon-icon_available").toggleClass("icon-icon_unavailable"),$(".icon-icon_unavailable").removeClass("icon-icon_available"),$(".thanx").html(e.body.success)),$(".rating-container").next(".action-field").show()},error:function(e){"abort"!=e.statusText&&console.log("err")},complete:function(){BUSY_REQUEST=!1}}))})(t,o)};function contentTooltipConfigPopupActions(e){checkStringLength($(".bonus-box"),15),767<$(window).width()&&$(".bonus-info .content_popup").niceScroll({cursorcolor:"#A8AEC8",cursorwidth:"3px",autohidemode:!1,cursorborder:"1px solid #A8AEC8",railoffset:{top:0,left:20},horizrailenabled:!1}),$(".js-tooltip").tooltipster(tooltipConfig),$(".js-copy-tooltip").tooltipster(copyTooltipConfig),copyToClipboard(),$(".close_btn").on("click",function(){e.tooltipster("hide")})}tooltipConfig={trigger:"click",maxWidth:279,animation:"grow",debug:!1},copyTooltipConfig={trigger:"click",maxWidth:260,minWidth:260,animation:"grow",contentAsHTML:!0,debug:!1,functionBefore:function(e,t){e.content('                <div class="centered">                    <i class="icon icon-icon_available"></i> Code copied to clipboard                </div>            ')}},contentTooltipConfigPopup={trigger:"click",maxWidth:460,interactive:!0,contentAsHTML:!0,debug:!1,content:$(".loader"),animation:"fade",contentCloning:!1,functionReady:function(e,t){$("body").addClass("shadow"),setTimeout(function(){$(".tooltipster-fade.tooltipster-show").css("opacity","1"),contentTooltipConfigPopupActions($(t.origin))},500)},functionAfter:function(){$("body").removeClass("shadow"),$(".tooltipster-fade.tooltipster-show").css("opacity","1")},functionBefore:function(t,e){var o,n=$(e.origin);!0!==n.data("loaded")&&(o=n.data("name"),e=n.data("is-free"),(new XMLHttpRequest).abort(),$.ajax({url:"/casino/bonus-popup",data:{casino:o,is_free:e},dataType:"html",type:"POST",success:function(e){t.content(e),setTimeout(function(){contentTooltipConfigPopupActions(n)},150),setTimeout(function(){$(".tooltipster-fade.tooltipster-show").css("opacity","1")},700),n.data("loaded",!0)}}))}},$(".js-drag-rate").ionRangeSlider({min:1,max:5,step:1,grid:!0,values:["Terrbile","Poor","Good","Very good","Excellent"],skin:"round",grid_snap:!0,hide_from_to:!0,hide_min_max:!0,onFinish:function(e){}});var contentPopupWidth=460;function unlockScreen(){$("html, body").removeClass("no-scroll")}function lockScreen(){$("html, body").addClass("no-scroll")}function newsletter(e){var t,e=e,o=e.find(".news-email"),n=e.find(".news-btn"),a=$("#news-success"),i=$("#news-note"),s="not-valid",c=new XMLHttpRequest;_prepMessage=function(){return t=o.val(),ok=!0,""!==t&&validateEmail(t)?o.parent().removeClass(s):(o.parent().addClass(s),ok=!1),ok?i.hide():i.show(),ok},_sendNews=function(e){c.abort(),c=$.ajax({url:"/newsletter/subscribe",data:{email:e},dataType:"json",timeout:2e4,type:"POST",success:function(e){"ok"==e.status?(a.show(),i.hide(),n.prop("disabled",!0),o.val(""),_onEvents()):"error"==e.status&&(e=JSON.parse(e.body),$(".action-added").remove(),$.each(e,function(e,t){t='<div class="action-field action-added not-valid ">'+t+"</div>";$(".review-submit-holder .msg-holder").append(t)}))},error:function(e){console.error("Could not send message!")}})},_onEvents=function(){n.on({click:function(e){!1===_prepMessage()?e.stopPropagation():_sendNews(t)}})},_init=function(){_onEvents()},_init()}function initSearch(){var e=$(".header-search"),t=$(".js-search-opener",e),o=$(".js-mobile-search-opener"),n=$(".js-search-close",e),a=$(".js-mobile-search-close"),e=$(".js-mobile-search-clear"),i=$(".js-search-drop"),s=$(".header-search-input input"),c=0;t.on("click",function(e){$("body").addClass("search-opened"),s.focus(),searchDropOpen(i),$(document).on("click touchstart",function(e){0==$(e.target).closest(i).length&&0==$(e.target).closest(s).length&&0==$(e.target).closest(o).length&&0==$(e.target).closest(t).length&&(s.val(""),searchDropClose(i))})}),s.on("keydown",function(e){13!=e.keyCode?(isSearchResultEvent=!0,searchDropOpen(i)):isSearchResultEvent=!1}),n.on("click",function(e){searchDropClose(i)}),o.on("click",function(e){c=$(window).scrollTop(),$("body").addClass("mobile-search-opened"),lockScreen(),s.focus()}),a.on("click",function(e){s.val("").blur(),$("body").removeClass("mobile-search-opened"),unlockScreen(),goToPosition(c)}),e.on("click",function(){s.val("").focus()}),s.on("focus",function(){goToPosition(0)}),i.on("scroll",function(e){s.blur()})}function goToPosition(e){$("html, body").animate({scrollTop:e},5)}function initMobileMenu(){var t=$("#js-mobile-menu-opener, #js-mobile-menu-close"),o=$(".header-menu"),n=null,a=$("html, body");t.on("click",function(e){$("body").toggleClass("menu-opened"),t.toggleClass("active"),checkIfIsMobileDevice()&&(n=$(window).scrollTop(),a.hasClass("no-scroll")?lockScreen():(unlockScreen(),goToPosition(n)),$(".expand-menu__list-item.active ").closest(".expand-holder").addClass("opened")),$(document).on("click touchstart",function(e){0==$(e.target).closest(o).length&&0==$(e.target).closest(t).length&&($("body").removeClass("menu-opened"),checkIfIsMobileDevice()&&(unlockScreen(),goToPosition(n)),t.removeClass("active"))}),e.preventDefault()})}function initToggleMenu(){var e,t=document.querySelector(".header-menu__list-holder");t&&(e=checkIfIsMobileDevice()?"click":"hover",t.addEventListener(e,function(e){for(var t,o=e.target;o!=this;){if(o.classList.contains("expand-holder")){(t=document.querySelector(".expand-holder.opened"))==o?"expand-menu"!==e.target.className&&t.classList.remove("opened"):t?("expand-menu"!==e.target.className&&t.classList.remove("opened"),setTimeout(function(){o.classList.add("opened")},400)):o.classList.add("opened");break}o=o.parentNode}},!0))}function searchDropOpen(e){setTimeout(function(){e.slideDown("fast")},300)}function searchDropClose(e){e.slideUp("fast"),setTimeout(function(){$("body").removeClass("search-opened")},300)}function sliderInit(){new Swiper("#main-carousel",{slidesPerView:6,spaceBetween:5,navigation:{nextEl:".carousel-next",prevEl:".carousel-prev"},breakpoints:{1024:{freeMode:!0,slidesPerView:"auto"}}});var t,o,e={slidesPerView:"auto",freeMode:!0,allowTouchMove:!1,on:{slideChangeTransitionStart:function(e){$(".links-left, .links-right").fadeIn("fast")},slideChangeTransitionEnd:function(e){0==this.translate&&$(".links-left").fadeOut("fast"),this.isEnd&&$(".links-right").fadeOut("fast")}},breakpoints:{1024:{allowTouchMove:!0},690:{allowTouchMove:!0}}};function n(e,t,o){e=e.closest(".swiper-container");t.clientX>e.offset().left+e.width()/1.3?o.slideNext(500):t.clientX<e.offset().left+e.width()/6&&o.slidePrev(500)}$("#links-nav").length&&(t=new Swiper(".links-casinos #links-nav",e),o=new Swiper(".links-games #links-nav",e),e=$("#links-nav .active").parent().index()-1,$(".links-casinos #links-nav").length&&t.slideTo(e,300),$(".links-games #links-nav").length&&o.slideTo(e,300)),1024<$(window).width()&&($(".links-casinos .links-nav a").on("mouseenter",function(e){n($(this),e,t)}),$(".links-games .links-nav a").on("mouseenter",function(e){n($(this),e,o)}))}function refresh(){$(".js-tooltip").tooltipster(tooltipConfig),$(".js-copy-tooltip").tooltipster(copyTooltipConfig),$(".js-tooltip-content").tooltipster(contentTooltipConfig),$(".js-tooltip-content-popup").tooltipster(contentTooltipConfigPopup)}function copyToClipboard(){$(".js-copy-to-clip").on("click",function(e){var t,o;t=this,o=$("<input readonly>"),$("body").append(o),o.val($(t).data("code")).select(),document.execCommand("copy"),o.remove(),e.preventDefault()})}function strip(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}function checkStringLength(e,o){$(e).each(function(){var e=$(this).find(".list-item-trun"),t=$(this).find(".bubble");e.text().length>=o&&t.css("visibility","visible")})}function initTooltipseter(){$(".js-tooltip").tooltipster(tooltipConfig),$(".js-copy-tooltip").tooltipster(copyTooltipConfig),$(".js-tooltip-content").tooltipster(contentTooltipConfig),$(".js-tooltip-content-popup").tooltipster(contentTooltipConfigPopup)}function bindButtons(){$(".search_input").on({blur:function(e){var t=$(this).val().trim();isSearchResultEvent||$(".search-tag-manager").length&&$(this).val().trim()==t||2<t.length&&t!=searched_value&&(searched_value=t,loadScripts(["assets/search-tracker"]),SearchTracker(t))}}),$("#search-all").on({mousedown:function(){isSearchResultEvent=!0},mouseup:function(){isSearchResultEvent=!1}}),$(".js-more-games").click(function(){$(this).addClass("loading");var e=$(this).data("software"),t=$(this);console.dir("/games-by-software/"+GAME_CURR_PAGE),_request=$.ajax({url:"/games-by-software/"+GAME_CURR_PAGE,data:{page:GAME_CURR_PAGE,software:e},dataType:"html",type:"post",success:function(e){setTimeout(function(){t.removeClass("loading"),refresh()},1e3),GAME_CURR_PAGE++,$(".games-list").append(e),$(t).data("total")===$(".games-list").children().length&&$(t).hide()},error:function(e){jQuery.parseJSON(e.responseJSON.body.message)[0];"abort"!=e.statusText&&console.log("err")},complete:function(){BUSY_REQUEST=!1}})}),$(".js-more-casinos").click(function(){$(this).addClass("loading");var t=$(this).data("key"),o=$(this);_request=$.ajax({url:"/casinos-by-software/"+determineCasinoPage(t),data:{page:determineCasinoPage(t),type:t,software:$(o).data("software")},dataType:"html",type:"post",success:function(e){setTimeout(function(){o.removeClass("loading"),refresh()},1e3),raiseCasinoPage(t),$(o).parent().prev().find(".list-body").append(e),$(o).data("total")===$(o).parent().prev().find(".list-body").children().length&&$(o).hide()},error:function(e){jQuery.parseJSON(e.responseJSON.body.message)[0];"abort"!=e.statusText&&console.log("err")},complete:function(){BUSY_REQUEST=!1}})}),$(".js-more-banking").click(function(){$(this).addClass("loading");var t=$(this);_request=$.ajax({url:"/casinos-by-banking/"+BEST_BANKING_PAGE,data:{page:BEST_BANKING_PAGE,banking:$(t).data("banking")},dataType:"html",type:"post",success:function(e){setTimeout(function(){t.removeClass("loading"),refresh()},1e3),BEST_BANKING_PAGE++,$(t).parent().prev().find(".list-body").append(e),$(t).data("total")===$(t).parent().prev().find(".list-body").children().length&&$(t).hide()},error:function(e){jQuery.parseJSON(e.responseJSON.body.message)[0];"abort"!=e.statusText&&console.log("err")},complete:function(){BUSY_REQUEST=!1}})}),$(".load-more").click(function(){new XMLHttpRequest;var e=$(this).data("category"),t=$(this);$.ajax({url:"/load-more/"+e+"/"+AJAX_CUR_PAGE,data:{page:AJAX_CUR_PAGE,category:e},dataType:"html",type:"post",success:function(e){AJAX_CUR_PAGE++,console.dir(e),$(".cards-list-wrapper").append(e),$(t).data("total")===$(".cards-list-wrapper").children().length&&$(t).hide()},error:function(e){jQuery.parseJSON(e.responseJSON.body.message)[0];"abort"!=e.statusText&&(console.log("err"),__this.closest(_obj).next(".action-field.not-valid").show())},complete:function(){BUSY_REQUEST=!1}})})}ww<768&&(contentPopupWidth=300),contentTooltipConfig={trigger:"click",minWidth:contentPopupWidth,interactive:!0,contentAsHTML:!0,debug:!1,content:$(".loader"),animation:"fade",position:"top",contentCloning:!1,functionReady:function(e,t){$("body").addClass("shadow"),checkStringLength($(".bonus-box"),15),$(".js-tooltip").tooltipster(tooltipConfig),setTimeout(function(){$(".tooltipster-fade.tooltipster-show").css("opacity","1")},500)},functionPosition:function(e,t,o){if(ww<768&&375<ww)return o.coord.left+=20,o},functionAfter:function(){$("body").removeClass("shadow"),$(".tooltipster-fade.tooltipster-show").css("opacity","1")},functionBefore:function(t,e){var o,n=$(e.origin);function a(){$(".js-tooltip").tooltipster(tooltipConfig),$(".js-copy-tooltip").tooltipster(copyTooltipConfig),copyToClipboard(),checkStringLength($(".bonus-box"),15)}!0!==n.data("loaded")?(o=n.data("name"),e=n.data("is-free"),(new XMLHttpRequest).abort(),$.ajax({url:"/casino/bonus",data:{casino:o,is_free:e},dataType:"html",type:"GET",success:function(e){ww<768&&($(".tooltipster-sidetip .tooltipster-box .tooltipster-content").css({padding:0}),$(".tooltipster-sidetip .tooltipster-box").css({borderRadius:"6px"})),t.content(e),setTimeout(function(){a()},50),n.data("loaded",!0)}})):setTimeout(function(){a()},50)}},sliderInit();var Filters=function(e){var s,t,o=e,n=this,a=o.find("input[type=checkbox]"),i=o.find("input[type=radio]"),c=o.find("select[name=soft]"),r=$(".data-container"),l=r.data("type"),d=r.data("type-value"),u=$(".empty-filters"),p=o.next(".data-container-holder").find(".holder"),e=$("#default"),f=new XMLHttpRequest;void 0===l&&(l="game_type");var h=o.data("url");e.prop("checked",!0),"/games-filter/"===h&&((e=new MutationObserver(function(e){var t=0;e.forEach(function(e){"childList"===e.type&&0!==e.addedNodes.length&&t<1&&(initImageLazyLoad(),t++)})})).observe($(".data-container").get(0),{childList:!0,subtree:!0}),e.observe($(".data-add-container").get(0),{childList:!0,subtree:!0}));var m=function(e,t,o){var n={};return $.each(a,function(e,t){$(t).is(":checked")&&(n[$(t).attr("name")]=1),"reset"==o&&(n[$(t).attr("name")]="",$(t).prop("checked",!1))}),$.each(i,function(e,t){$(t).is(":checked")&&(n[$(t).attr("name")]=$(t).attr("value")),"reset"==o&&(n[$(t).attr("name")]=1,0==e&&$(t).prop("checked",!0))}),n[e]=t,"undefined"!=c.val()&&null!=c.val()&&(n.software=c.val().join(),"reset"==o&&(n.software="")),"undefined"==typeof AJAX_CUR_PAGE&&(AJAX_CUR_PAGE=1),"add"==o&&"reset"!=o||(AJAX_CUR_PAGE=0),null!=n.label&&"Mobile"==n.label&&(n.compatibility="mobile",delete n.label),n};_ajaxRequestCasinos=function(e,a){var i,t;"add"==a?s.addClass("loading"):$(".overlay, .loader").fadeIn("fast"),BUSY_REQUEST||(BUSY_REQUEST=!0,f.abort(),i="/games-filter/"==h?24:100,$(".data-container-holder").data("limit-per-page")&&(i=$(".data-container-holder").data("limit-per-page")),"/casinos"===location.pathname&&(h="load-all-casinos/"),f=$.ajax({url:h+AJAX_CUR_PAGE,data:e,dataType:"html",type:"GET",success:function(e){_targetAddContainer=$(".data-add-container");var t=$(e).find(".loaded-item"),o=$(e).filter("[data-load-total]").data("load-total"),n=$(".qty-items");"replace"==a?(r.html(e),_targetAddContainer.html(""),n.attr("data-load-total",o),$(".qty-items-quantity").text(o),t.length===parseInt(n.attr("data-load-total"))?(0<t.length?(p.show(),u.hide()):(p.hide(),u.show()),s.hide()):(s.show(),p.show(),u.hide()),refresh(),AJAX_CUR_PAGE=1,0):(AJAX_CUR_PAGE++,setTimeout(function(){_targetAddContainer.append(t),s.removeClass("loading"),refresh(),initImageLazyLoad(),t.length<i&&s.hide()},1e3)),_construct(),checkStringLength($(".data-add-container .bonus-box, .data-container .bonus-box"),21)},error:function(e){"abort"!=e.statusText&&console.log("err")},complete:function(){console.log(parseInt($(".qty-items").attr("data-load-total"))),BUSY_REQUEST=!1,$(".overlay, .loader").fadeOut("fast"),"/casinos-filter/"===h?(parseInt($(".qty-items").attr("data-load-total"))<=i?$(".js-more-items").hide():$(".js-more-items").show(),gridViewBoxPopup()):"/games-filter/"===h&&(parseInt($(".qty-items-quantity").html())<=i?$(".js-more-items").hide():$(".js-more-items").show()),grayscaleIE(),initImageLazyLoad(),copyToClipboard()}}),t=setTimeout(function(){},300),_hideLoading=function(){clearTimeout(t)})},_loadData=function(e){},_construct=function(){s=$(".js-more-items"),t=$(".js-reset-items"),a.off(),a.on("click",function(){console.log("795 _switchers.on"),_ajaxRequestCasinos(m(l,d),"replace")}),i.off(),i.on("click",function(){_ajaxRequestCasinos(m(l,d),"replace")}),$(".js-filter > option").on("click",function(){$(".js-filter > option").each(function(e,t){$(this).prop("selected")&&0})}),c.off(),c.on("change",function(){_ajaxRequestCasinos(m(l,d),"replace")}),s.off(),s.on("click",function(){return _ajaxRequestCasinos(m(l,d,"add"),"add"),!1}),t.off(),t.on("click",function(){return _ajaxRequestCasinos(m(l,d,"reset"),"add"),!1}),o[0].obj=n},_construct()},SearchPanel=function(e){var n,a,t=e,o=this,i=t.find(".js-trigger-search"),s=t.find("#search-all"),c=t.find("#search"),e=t.find("#search-form"),r=e.find("input"),l=e.find(".js-mobile-search-clear"),d=c.find("#search-casinos ul"),u=c.find("#search-lists ul"),p=c.find("#search-pages ul"),f=c.find("#search-empty"),g=!1,v=1,b=1,y=1,h=new XMLHttpRequest;window.contentBeforeSearch;function _(){$("#site-content").html("").append(contentBeforeSearch),$(".js-search-drop").show(),$("body").removeClass("advanced-search-opened"),r.blur(),setTimeout(function(){initSite()},1e3)}function m(e){return e.replace(/\s/g,"-").toLowerCase()}function w(e){return'<li>                    <a class="search-results-label" href="/'+e.link.replace("/games/","")+'">                        '+e.name+"                    </a>                </li>"}var T=function(){s.parent().fadeIn(),s.closest(".header-search").addClass("search-active")},C=function(){s.parent().removeClass("search-active").fadeOut(),s.closest(".header-search").removeClass("search-active")},k=function(e,t,o,n){var a;BUSY_REQUEST||(BUSY_REQUEST=!0,h.abort(),h=$.ajax({url:e,data:{value:t},dataType:"json",type:"GET",success:function(e){_hideLoading(),j(e,o,n)},error:function(e){"abort"!=e.statusText&&(_hideLoading(),console.log("err"),A())},complete:function(){_hideLoading(),BUSY_REQUEST=!1}}),a=setTimeout(function(){},300),_hideLoading=function(){clearTimeout(a)})},E=function(){window.scrollTo(0,0);var m=$("#site-content");BUSY_REQUEST||(BUSY_REQUEST=!0,h.abort(),h=$.ajax({url:"/search/advanced",data:{value:r.val()},dataType:"HTML",type:"GET",success:function(e){var t,o,n,a,i,s,c,r,l,d,u,p,f,h;$("body").addClass("advanced-search-opened"),C(),g||(contentBeforeSearch=$("#site-content .main, #site-content .promo").detach()),g=!0,m.html(e),L(),t=$("#js-search-more-lists"),o=$(".more-lists",t),n=o.data("total-casinos"),a=$("#js-search-more-casinos"),i=$(".more-num",a),s=i.data("total-casinos"),c=$("#js-search-more-pages"),r=$(".more-num",c),e=r.data("total-games"),l=Math.floor(n/5),d=Math.floor(s/5),u=Math.floor(e/5),f=s%5,h=e%5,(p=n%5)<5&&1==l&&o.text(p),f<5&&1==d&&i.text(f),h<5&&1==u&&r.text(h),t.on("click",function(){return k("/search/more-lists/"+b,$(".search-title span").text(),$("#all-lists-container"),"lists"),l<=b?t.fadeOut():t.fadeIn(),l-1<=b&&0<p&&o.text(p),b++,!1}),a.on("click",function(){return k("/search/more-casinos/"+v,$(".search-title span").text(),$("#all-casinos-container"),"casinos"),d<=v?a.fadeOut():a.fadeIn(),d-1<=v&&0<f&&i.text(f),v++,!1}),c.on("click",function(){return k("/search/more-games/"+y,$(".search-title span").text(),$("#all-games-container"),"games"),u<=y?c.fadeOut():c.fadeIn(),u-1<=y&&0<h&&r.text(h),y++,!1}),unlockScreen(),m.find("#js-search-back").each(function(){$(this).on({click:function(){_()}})}),$(".js-mobile-search-close").on("click",function(){_()})},error:function(e){"abort"!=e.statusText&&console.log("err")},complete:function(){BUSY_REQUEST=!1}}))},S=function(e,t){var o;checkIfIsMobileDevice()&&lockScreen(),BUSY_REQUEST&&a==n||(BUSY_REQUEST=!0,h.abort(),h=$.ajax({url:e,data:{value:r.val(),page:t},dataType:"json",type:"GET",success:function(e){_hideLoading(),x(e)},error:function(e){"abort"!=e.statusText&&(_hideLoading(),console.log("err"),A())},complete:function(e){_hideLoading(),a++,BUSY_REQUEST=!1}}),o=setTimeout(function(){},300),_hideLoading=function(){clearTimeout(o)})},j=function(e,t,o){var n,a=e.body.results;if("lists"===o)for(var i=0;i<a.length;i++){var s=w({link:a[i].url,name:a[i].title});t.append(s)}else for(var c in a){"games"==o?n="play/"+m(a[c]):"casinos"==o&&(n="reviews/"+m(a[c])+"-review");s=w({link:n,name:a[c]});t.append(s)}},x=function(e){var t=e.body.lists,o=e.body.casinos,n=e.body.games;if(u.empty(),d.empty(),p.empty(),$.isEmptyObject(t)&&$.isEmptyObject(o)&&$.isEmptyObject(n))A();else{U(),$.isEmptyObject(t)?u.parent().hide().next().addClass("single"):(u.parent().show().next().removeClass("single"),3<e.body.total_lists&&Math.ceil(e.body.total_lists/3)>b||(b=1)),$.isEmptyObject(o)?d.parent().hide().next().addClass("single"):(d.parent().show().next().removeClass("single"),3<e.body.total_casinos&&Math.ceil(e.body.total_casinos/3)>v||(v=1)),$.isEmptyObject(n)?p.parent().hide().prev().addClass("single"):(p.parent().show().prev().removeClass("single"),3<e.body.total_pages&&Math.ceil(e.body.total_casinos/3)>y||(y=1)),u.html("");for(var a,i,s=0;s<t.length;s++){var c=w({link:t[s].url,name:t[s].title});u.append(c)}for(a in o){c=w({link:"reviews/"+m(o[a])+"-review",name:o[a]});d.append(c)}for(i in n){c=w({link:"play/"+m(n[i]),name:n[i]});p.append(c)}""!=r.val()&&M()}},R=function(){v=y=1},A=function(){u.parent().hide(),d.parent().hide(),p.parent().hide(),f.show(),C()},U=function(){u.parent().show(),d.parent().show(),p.parent().show(),f.hide()},L=function(){searchDropClose($(".js-search-drop"))},P=function(){L()},M=function(){t.find(".search-results-label").each(function(){$(this).html(function(e,t){return t.replace(new RegExp(r.val().toLowerCase(),"ig"),"<b>$&</b>")})})};o.close=function(){P()},i.on("click",function(){console.log("asdad")}),r.on({focus:function(){a=n=0,S("/search"),R()},keyup:function(e){27==e.keyCode?P():13==e.keyCode?(isSearchResultEvent=!0,""!=r.val()&&(E(),r.blur())):(isSearchResultEvent=!1,t.find("#search__popup").addClass("load"),n++,S("/search")),R(),(""!=r.val()?T:C)()}}),l.on("click",function(){return r.val("").focus(),S("/search"),R(),!1}),s.on("click",function(){return""!=r.val()&&E(),!1}),t[0].obj=o},initSite=function(){copyToClipboard(),checkStringLength($(".list .bonus-box"),21),checkStringLength($(".bonus-item .bonus-box"),33),grayscaleIE(),initMobileMenu(),$(".message .close").on("click",function(e){$(this).parent().fadeOut(),e.preventDefault()}),$(".js-history-back").on("click",function(e){window.history.back(),e.preventDefault()})};