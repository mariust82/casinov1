!function(t){"function"==typeof define&&define.amd?define(["public/build/js/compilations/jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("public/build/js/compilations/jquery")):t(jQuery)}(function(m){var i=function(){function t(){var l=this,s=function(t){return m.isNumeric(t)&&(t=Math.floor(t)),m('option[value="'+t+'"]',l.$elem)},o=function(t){var e=l.$elem.data("barrating");return void 0!==t?e[t]:e},u=function(t,e){null!==e&&"object"==typeof e?l.$elem.data("barrating",e):l.$elem.data("barrating")[t]=e},t=function(){var t=function(){var t=l.options.initialRating;return t?s(t):m("option:selected",l.$elem)}(),e=function(){var t=l.$elem.find('option[value="'+l.options.emptyValue+'"]');return!t.length&&l.options.allowEmpty?(t=m("<option />",{value:l.options.emptyValue})).prependTo(l.$elem):t}(),n=t.val(),i=t.data("html")?t.data("html"):t.text(),a=null!==l.options.allowEmpty?l.options.allowEmpty:!!e.length,r=e.length?e.val():null,o=e.length?e.text():null;u(null,{userOptions:l.options,ratingValue:n,ratingText:i,originalRatingValue:n,originalRatingText:i,allowEmpty:a,emptyRatingValue:r,emptyRatingText:o,readOnly:l.options.readonly,ratingMade:!1})},r=function(){return o("ratingText")},d=function(){return o("ratingValue")},c=function(){return o("userOptions").reverse?"nextAll":"prevAll"},g=function(t){s(t).prop("selected",!0),o("userOptions").triggerChange&&l.$elem.change()},f=function(t){(t=t||r())==o("emptyRatingText")&&(t=""),l.options.showSelectedRating&&l.$elem.parent().find(".br-current-rating").text(t)},p=function(){l.$widget.find("a").removeClass(function(t,e){return(e.match(/(^|\s)br-\S+/g)||[]).join(" ")})},h=function(){var t,e,n=l.$widget.find('a[data-rating-value="'+d()+'"]'),i=o("userOptions").initialRating,a=m.isNumeric(d())?d():0,r=function(t){return Math.round(Math.floor(10*t)/10%1*100)}(i);if(p(),n.addClass("br-selected br-current")[c()]().addClass("br-selected"),!o("ratingMade")&&m.isNumeric(i)){if(i<=a||!r)return;t=l.$widget.find("a"),(e=n.length?n[o("userOptions").reverse?"prev":"next"]():t[o("userOptions").reverse?"last":"first"]()).addClass("br-fractional"),e.addClass("br-fractional-"+r)}},e=function(t){t.on("click.barrating",function(t){var e,n,i=m(this),a=o("userOptions");return t.preventDefault(),e=i.attr("data-rating-value"),n=i.attr("data-rating-text"),function(t){return!(!o("allowEmpty")||!o("userOptions").deselectable)&&d()==t.attr("data-rating-value")}(i)&&(e=o("emptyRatingValue"),n=o("emptyRatingText")),u("ratingValue",e),u("ratingText",n),u("ratingMade",!0),g(e),f(n),h(),a.onSelect.call(l,d(),r(),t),!1})},n=function(t){e(t),l.options.hoverState&&(function(t){t.on("mouseenter.barrating",function(){var t=m(this);p(),t.addClass("br-active")[c()]().addClass("br-active"),f(t.attr("data-rating-text"))})}(t),l.$widget.on("mouseleave.barrating blur.barrating",function(){f(),h()}))},i=function(t){t.off(".barrating")},a=function(t){var e=l.$widget.find("a");o("userOptions").fastClicks&&function(t){t.on("touchstart.barrating",function(t){t.preventDefault(),t.stopPropagation(),m(this).click()})}(e),t?(i(e),function(t){t.on("click.barrating",function(t){t.preventDefault()})}(e)):n(e)};this.show=function(){o()||(function(){var t=["br-wrapper"];""!==l.options.theme&&t.push("br-theme-"+l.options.theme),l.$elem.wrap(m("<div />",{class:t.join(" ")}))}(),t(),l.$widget=function(){var a=m("<div />",{class:"br-widget"});return l.$elem.find("option").each(function(){var t,e,n,i;(t=m(this).val())!==o("emptyRatingValue")&&(e=m(this).text(),(n=m(this).data("html"))&&(e=n),i=m("<a />",{"data-rating-value":t,"data-rating-text":e,html:l.options.showValues?e:""}),a.append(i))}),l.options.showSelectedRating&&a.append(m("<div />",{text:"",class:"br-current-rating"})),l.options.reverse&&a.addClass("br-reverse"),l.options.readonly&&a.addClass("br-readonly"),a}(),l.$widget.insertAfter(l.$elem),h(),f(),a(l.options.readonly),l.$elem.hide())},this.readonly=function(t){"boolean"==typeof t&&o("readOnly")!=t&&(a(t),u("readOnly",t),l.$widget.toggleClass("br-readonly"))},this.set=function(t){var e=o("userOptions");0!==l.$elem.find('option[value="'+t+'"]').length&&(u("ratingValue",t),u("ratingText",l.$elem.find('option[value="'+t+'"]').text()),u("ratingMade",!0),g(d()),f(r()),h(),e.silent||e.onSelect.call(this,d(),r()))},this.clear=function(){var t=o("userOptions");u("ratingValue",o("originalRatingValue")),u("ratingText",o("originalRatingText")),u("ratingMade",!1),m("option",l.$elem).prop("selected",function(){return this.defaultSelected}),o("userOptions").triggerChange&&l.$elem.change(),f(r()),h(),t.onClear.call(this,d(),r())},this.destroy=function(){var t=d(),e=r(),n=o("userOptions");i(l.$widget.find("a")),l.$widget.remove(),l.$elem.removeData("barrating"),l.$elem.unwrap(),l.$elem.show(),n.onDestroy.call(this,t,e)}}return t.prototype.init=function(t,e){return this.$elem=m(e),this.options=m.extend({},m.fn.barrating.defaults,t),this.options},t}();m.fn.barrating=function(e,n){return this.each(function(){var t=new i;if(m(this).is("select")||m.error("Sorry, this plugin only works with select fields."),t.hasOwnProperty(e)){if(t.init(n,this),"show"===e)return t.show(n);if(t.$elem.data("barrating"))return t.$widget=m(this).next(".br-widget"),t[e](n)}else{if("object"==typeof e||!e)return n=e,t.init(n,this),t.show();m.error("Method "+e+" does not exist on jQuery.barrating")}})},m.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,triggerChange:!0,onSelect:function(t,e,n){},onClear:function(t,e){},onDestroy:function(t,e){}},m.fn.barrating.BarRating=i});