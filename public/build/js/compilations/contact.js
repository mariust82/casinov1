function handleContactUs(e){var t,a,n,o=$(".contact-name"),s=$(".contact-email"),r=$(".contact-message"),c=$(".contact-btn"),l=$("#contact-us-success"),d=$("#contact-us-note"),i=$("#server-error-note"),u="not-valid",p=new XMLHttpRequest;_prepContact=function(){return t=o.val(),a=s.val(),n=r.val(),ok=!0,""===t?(o.parent().addClass(u),ok=!1):o.parent().removeClass(u),""!==a&&function(e){return/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i.test(e)}(a)?s.parent().removeClass(u):(s.parent().addClass(u),ok=!1),""===n?(r.parent().addClass(u),ok=!1):r.parent().removeClass(u),ok?d.hide():d.show(),ok},_sendMessage=function(e,t,a){p.abort(),p=$.ajax({url:"/contact/send",data:{name:e,email:t,message:a},dataType:"json",timeout:2e4,type:"POST",success:function(e){if("ok"==e.status)l.show(),d.hide(),i.hide(),c.prop("disabled",!0),o.val(""),s.val(""),r.val(""),_onEvents();else if("error"==e.status){JSON.parse(e.body);i.show()}},error:function(e){console.error("Could not send message!")}})},_onEvents=function(){c.on({click:function(e){!1===_prepContact()?e.stopPropagation():_sendMessage(t,a,n)}})},_onEvents()}new handleContactUs($(".contact-form"));
