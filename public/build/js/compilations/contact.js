function handleContactUs(e){var a,t,n,o=$(".contact-name"),s=$(".contact-email"),c=$(".contact-message"),r=$(".contact-btn"),l=$("#contact-us-success"),d=$("#contact-us-note"),i=$("#server-error-note"),p="not-valid",u=new XMLHttpRequest;_prepContact=function(){return a=o.val(),t=s.val(),n=c.val(),ok=!0,""===a?(o.parent().addClass(p),ok=!1):o.parent().removeClass(p),""!==t&&/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i.test(t)?s.parent().removeClass(p):(s.parent().addClass(p),ok=!1),""===n?(c.parent().addClass(p),ok=!1):c.parent().removeClass(p),ok?d.hide():d.show(),ok},_sendMessage=function(e,a,t){u.abort(),u=$.ajax({url:"/contact/send",data:{name:e,email:a,message:t},dataType:"json",timeout:2e4,type:"POST",success:function(e){if("ok"==e.status)l.show(),d.hide(),i.hide(),r.prop("disabled",!0),o.val(""),s.val(""),c.val(""),_onEvents();else if("error"==e.status){JSON.parse(e.body);i.show()}},error:function(e){console.error("Could not send message!")}})},_onEvents=function(){r.on({click:function(e){!1===_prepContact()?e.stopPropagation():_sendMessage(a,t,n)}})},_onEvents()}new handleContactUs($(".contact-form"));
