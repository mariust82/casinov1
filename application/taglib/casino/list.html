<:set var="bonus" val="Free"/>
<:set var="is_low_wagering" val="(${data.page_type} == 'label' && ${data.selected_entity} == 'Low Wagering') || (${data.page_type} == 'low_wagering')"/>
<:set var="isNoDeposit" val="(strtolower(${data.selected_entity}) == 'no deposit bonus')"/>
<:set var="isLowWagering" val="(strtolower(${data.selected_entity}) == 'low wagering')"/>
<:if test="strtolower(${data.selected_entity}) == 'no deposit bonus' || strtolower(${data.selected_entity}) == 'low wagering'">
	<:set var="css_class" val="casinos-list"/>
<:else>
	<:set var="css_class" val="casino_items-view"/>
</:if>
<:if test="strtolower(${data.page_type}) !== 'index' && strtolower(${data.page_type}) !== 'game_info'">
	<:set var="data_total" val="${data.total_casinos}"/>
<:else>
	<:set var="data_total" val=""/>
</:if>
<div class="list">
	<div class="list-heading list-item">
		<:if test="strtolower(${data.selected_entity}) == 'no deposit bonus' || strtolower(${data.selected_entity}) == 'low wagering'">
			<div class="list-item-cell list-heading-title list-bonus">BONUS</div>
			<div class="list-item-cell list-heading-title list-casino">CASINO</div>
			<div class="list-item-cell list-heading-title list-code">BONUS CODE</div>
		<:else>
			<div class="list-item-cell list-item-casino list-heading-title">CASINO</div>
			<:if test="${is_low_wagering}">
				<div class="list-item-cell list-heading-title list-item-cell-bfnp">BONUS <span>FOR NEW PLAYERS</span></div>
				<div class="list-item-cell list-heading-title list-item-cell-wagering">WAGERING</div>
				<div class="list-item-cell list-heading-title list-item-cell-buttons">&nbsp;</div>
			<:else>
				<:if test="${data.page_type} == 'banking_method'">
					<div class="list-item-cell list-heading-title list-item-banking-dep">DEPOSIT</div>
					<div class="list-item-cell list-heading-title list-item-banking-wit">WITHDRAWAL</div>
				<:else>
					<div class="list-item-cell list-heading-title list-item-type">$[type]</div>
				</:if>
				<div class="list-item-cell list-heading-title list-item-alt-bonus">${bonus} BONUS</div>
				<div class="list-item-cell list-heading-title list-item-fd-bonus ${(${data.page_type} == 'banking_method'?'desktop':'')}"><span>FIRST DEPOSIT</span> BONUS</div>
				<div class="list-item-cell list-heading-title list-item-cell-buttons">&nbsp;</div>
			</:if>
		</:if>
	</div>
	<div class="list-body ${css_class} data-add-container" data-total="${data_total}">
		<:if test="${isLowWagering} || ${isNoDeposit}">
			<:foreach var="$[data]" val="result" key="key">
				<div class="slide-box loaded-item" data-slide="${key+1}">
					<casino:box isNoDeposit="${isNoDeposit}" isLowWagering=${isLowWagering} result="${result}"/>
				</div>
			</:foreach>
		<:else>
			<:set var="i" val="0"/>
			<:foreach var="$[data]" val="result">
				<:set var="fdb_amount" val="checkForAbbr(${result.bonus_first_deposit.amount})"/>
				<div class="list-item loaded-item">
					<div class="list-item-cell list-item-casino-logo">
                        <img width="98" height="65" class="lazy_loaded" data-src="${getCasinoLogo(${result.code}, 85, 56)}" onerror="this.onerror=null; this.src='/public/build/images/default_casino_logo.png'" alt="${result.name} Logo">
					</div>
					<div class="list-item-cell list-item-casino">
						<:if test="${result.new} == true && '$[type]' != 'ESTABLISHED'">
							<div class="new-casino"></div>
						</:if>
						<div class="list-flex">
							<:set var="accepted_class" val="(${result.is_country_accepted} == 1?'accepted':'not-accepted')"/>
							<img class="${accepted_class} lazy_loaded flag-spacing" data-src="/public/build/images/flags/${data.country.code}.png" width="30" height="20" alt="${data.country.code}">
							<:set var="score_class" val="get_rating(${result.rating})"/>
							<div class="list-rating ${normalize(${score_class})}">
								<:if test="${result.rating} == 0">
									${score_class}
									<span class="list-rating-score">-</span>
									<div class=" list-rating-score list-rating-score-mobile">|</div>
								<:else>
									${score_class}
									<span class="list-rating-score">
										${ceil(${result.rating})}
									</span>
								</:if>
							</div>
							<div class="list-title-holder">
								<a href="/reviews/${normalize(${result.name})}-review" class="list-title">
									${result.name}
									<:if test="'$[type]' == 'ESTABLISHED' && ${data.is_mobile}">
										<div class="list-small-text upper">${formatDate(${result.date_established})}</div>
									</:if>
								</a>
								<:if test="${result.is_tc_link}">
									<a href="/visit/${normalize(${result.name})}-terms" target="_blank" rel="nofollow" class="additional-link">T&C applies</a>
								</:if>
							</div>
							<div class="casino-info_container">
								<div class="row">
									<:if test="${result.is_country_accepted} == 1">
									<i class="icon icon-icon_available"></i>
									<:else>
									<i class="icon icon-icon_unavailable"></i>
									</:if>
									<img class="${accepted_class} lazy_loaded flag-spacing" data-src="/public/build/images/flags/${data.country.code}.png" width="30" height="20" alt="${data.country.code}">
									<span>
										Players from ${data.country.name} are <:if test="${result.is_country_accepted} == 1">
										accepted
										<:else>
										not accepted
										</:if>
									</span>
								</div>
								<:if test="!empty(${result.languages})">
								<div class="row">
									<:if test="${result.is_language_accepted} == 1">
									<i class="icon icon-icon_available"></i>
									<:else>
									<i class="icon icon-icon_unavailable"></i>
									</:if>
									<span>
										${result.languages.0} <:if test="${result.is_language_accepted} == 1">
										available
										<:else>
										not available
										</:if>
									</span>
								</div>
								</:if>
								<:if test="!empty(${result.currencies})">
								<div class="row">
									<:if test="${result.is_currency_accepted} == 1">
									<i class="icon icon-icon_available"></i>
									<:else>
									<i class="icon icon-icon_unavailable"></i>
									</:if>
									<span>
										${result.currencies.0} <:if test="${result.is_currency_accepted} == 1">
										accepted
										<:else>
										not accepted
										</:if>
									</span>
								</div>
								</:if>
								<:if test="!empty(${result.bonus_first_deposit.min_deposit})">
								<div class="row">
									<span class="icon">
										<img src="/public/build/images/arrow-down-bold-circle.svg">
									</span>
									Minimum deposit: ${result.bonus_first_deposit.min_deposit}
								</div>
								</:if>
								<:if test="!empty(${result.withdrawal_minimum})">
								<div class="row">
									<span class="icon">
										<img src="/public/build/images/arrow-up-bold-circle.svg">
									</span>
									Minimum withdrawal: ${result.withdrawal_minimum}
								</div>
								</:if>
								<:if test="!empty(${result.withdrawal_timeframes})">
								<div class="row">
									<span class="icon">
										<img src="/public/build/images/timer_icon.svg">
									</span>
									Withdrawal timeframe: ${result.withdrawal_timeframes} 
								</div>
								</:if>
							</div>
							<div class="welcome_package-container">
								<span class="wp-title">Welcome Package 
									<span class="welcome_package-popup-trigger">i</span>
									<div class="welcome_package-popup">
										<i class="icon-icon_unavailable close-popup-wp"></i>
										<div class="bonuses-wp">
											<:if test="!empty(${result.bonus_free})">
												<div class="bonus-item">
													<div class="bonus-box bonus-free">
													</div>
												</div>
											</:if>
											<div class="bonus-item">
												<div class="bonus-box bonus-first">
												</div>
											</div>
										</div>
									</div>
								</span>
								<:if test="isset(${result.bonus_free}) && ${result.bonus_free} !== null">
								<span class="wp-bonus-title free">${result.bonus_free.amount} ${result.bonus_free.type}</span>
								</:if>
								<:if test="isset(${result.bonus_first_deposit})">
								<span class="wp-bonus-title">${result.bonus_first_deposit.amount} ${result.bonus_first_deposit.type}</span>
								</:if>
							</div>
						</div>
					</div>

					<:if test="${data.page_type} != 'banking_method'">
						<:if test="!${is_low_wagering}">
							<div class="list-item-cell list-item-type">
								<div class="list-item-flex">
									<:if test="'$[type]' == 'ESTABLISHED'">
										<span class="upper">${formatDate(${result.date_established})}</span>
                                                                        <:elseif test="'$[type]' == 'WITHDRAWAL'">
										<span class="upper">${result.withdrawal_timeframes}</span>
									<:else>
										<a class="soft_link list-item-trun" href="/softwares/${normalize(${result.softwares.0})}">
											${result.softwares.0}
										</a>

										<:set var="extra" val="count(${result.softwares})-1"/>
										<:if test="${extra} > 0">
											<span class="bubble bubble-long js-tooltip software_tooltip" title="${result.all_softwares}">
												+${extra}
											</span>
										</:if>
									</:if>
								</div>
							</div>
						</:if>
					<:else>
						<div class="list-item-cell list-item-banking-dep">
							<i class="icon-icon_${(${result.deposit_methods}?'available':'unavailable')}"></i>
						</div>
						<div class="list-item-cell list-item-banking-wit">
							<i class="icon-icon_${(${result.withdraw_methods}?'available':'unavailable')}"></i>
						</div>
					</:if>

					<:if test="isset(${result.bonus_free.amount})">
						<:set var="fb_amount" val="checkForAbbr(${result.bonus_free.amount})"/>
					</:if>
					<:if test="isset(${result.bonus_free.type})">
						<:set var="fb_abbreviation" val="getAbbreviation(${result.bonus_free.type}, ${fdb_amount})"/>
					</:if>

					<:if test="${data.is_mobile}">
						<:if test="${is_low_wagering}">
							<div class="btn-round-holder list-item-cell-bfnp">
								${result.bonus_free.wagering}
							</div>
							<div class="btn-round-holder list-item-cell-wagering">
								<span class="btn-round js-tooltip-content" data-name="${result.name}" data-is-free="1"> ${fb_amount}
									<:if test="${fb_abbreviation} != 'NDB'">
										<:if test="isset(${result.bonus_free.type}) && ${result.bonus_free.type} == 'Free Spins' && empty(${fb_abbreviation})">
											<:set var="fs" val="FS" />
										<:else>
											<:set var="fs" val="" />
										</:if>
										<abbr title="${result.bonus_free.type}">${fb_abbreviation} ${fs}</abbr>
									</:if>
								</span>
							</div>
						<:else>
                            <div class="list-item-cell list-item-fd-bonus">
								<:if test="isset(${fb_amount}) && isset(${result.bonus_free})">
									<span class="btn-round js-tooltip-content" data-name="${result.name}" data-is-free="1">
										${fb_amount}
										<:if test="isset(${result.bonus_free.type}) && ${result.bonus_free.type} == 'Free Spins' && empty(${fb_abbreviation})">
											<:set var="fs" val="FS" />
										<:else>
											<:set var="fs" val="" />
										</:if>
										<:if test="isset(${result.bonus_free.type})">
											<abbr title="${result.bonus_free.type}"> ${fb_abbreviation} ${fs}</abbr>
										</:if> 
									</span>
								</:if>
								<:if test="!empty(${fdb_amount}) && strtoupper(${fdb_amount}) !== 'NONE'">
                                    <span class="btn-round js-tooltip-content" data-name="${result.name}" data-is-free="0">${fdb_amount}</span>
								</:if>
							</div>
						</:if>
					<:else>
						<:if test="${is_low_wagering}">
							<div class="list-item-cell list-item-cell-bfnp">
								${result.bonus_free.wagering}
							</div>
							<div class="list-item-cell list-item-cell-wagering">
								<span class="btn-round js-tooltip-content" data-name="${result.name}" data-is-free="1"> ${fb_amount}
									<:if test="${fb_abbreviation} != 'NDB'">
										<abbr title="${result.bonus_free.type}">${fb_abbreviation}</abbr>
									</:if>
								</span>
							</div>
						<:else>
							<div class="list-item-cell list-item-alt-bonus">
								<:if test="${result.bonus_free}">
									<span class="btn-round js-tooltip-content" data-name="${result.name}" data-is-free="1">
										${fb_amount}  <abbr title="${result.bonus_free.type}">${getAbbreviation(${result.bonus_free.type},${fb_amount})}</abbr>
									</span>
								</:if>
							</div>
                            <div class="list-item-cell list-item-fd-bonus">
								<:if test="!empty(${fdb_amount}) && strtoupper(${fdb_amount}) !== 'NONE'">
									<span class="btn-round js-tooltip-content"  data-name="${result.name}" data-is-free="0">${fdb_amount}</span>
								</:if>
							</div>
						</:if>
					</:if>

					<div class="list-item-cell list-flex list-item-cell-buttons button-wrapper">
						<a class="cta-btn btn-reviews">
							Player Reviews ()
						</a>
						<:if test="${result.status}=='Blacklisted'">
							<a href="/visit/${normalize(${result.name})}" target="_blank" rel="nofollow" class="cta-btn btn-blk btn-err">
								<svg class="svg-icon"><use xlink:href="#icon-blacklisted"></use></svg>
							</a>
						<:elseif test="${result.status}=='Warning'">
							<a href="/visit/${normalize(${result.name})}" target="_blank" rel="nofollow" class="cta-btn btn-wrn btn-err">
								<svg class="svg-icon"><use xlink:href="#icon-warning"></use></svg>
							</a>
						<:elseif test="!${result.is_country_accepted}">
							<a href="/visit/${normalize(${result.name})}" class="cta-btn btn btn-rest" target="_blank" rel="nofollow">
								REST
							</a>
						<:else>
							<a href="/visit/${normalize(${result.name})}" class="cta-btn btn btn-small" target="_blank" rel="nofollow">
								Visit
							</a>
						</:if>
						
						<div class="casino-specifications">
							<span class="spec-title">Game Types</span>
							<div class="spec-row">
								<div class="spec-items">
									<div class="game-type-item">
										<img src="/public/build/images/blackjack.svg">
									</div>
									<div class="game-type-item">
										<img src="/public/build/images/roulette.svg">
									</div>
									<div class="game-type-item unavailable">
										<img src="/public/build/images/slots.svg">
									</div>
								</div>
								<div class="popup-spec">
									<span class="open-popup-spec">Show all (10)</span>
									<div class="popup-casino-spec">
										<i class="icon-icon_unavailable close-popup-spec"></i>
										<div class="game-type-item unavailable">
											<img src="/public/build/images/slots.svg">
											<span class="game-type_name">Slots</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/roulette.svg">
											<span class="game-type_name">Roulette</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/blackjack.svg">
											<span class="game-type_name">Blackjack</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/video_poker.svg">
											<span class="game-type_name">Video Poker</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/craps.svg">
											<span class="game-type_name">Craps</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/baccarat.svg">
											<span class="game-type_name">Baccarat</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/bingo.svg">
											<span class="game-type_name">Bingo</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/Keno.svg">
											<span class="game-type_name">Keno</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/table_games.svg">
											<span class="game-type_name">Table Games</span>
										</div>
										<div class="game-type-item">
											<img src="/public/build/images/scratch_cards.svg">
											<span class="game-type_name">Scratch Cards</span>
										</div>
									</div>
								</div>
							</div>							
							<span class="spec-title">Software Providers</span>
							<div class="spec-row">
								<div class="spec-items">
									<:foreach var="${result.softwares}" key="key" val="software">
									<:if test="${key}<3">
										<a class="list-title list_link item-spec software" href="/softwares/${normalize(${software})}">
											<img src="/public/sync/software_logo_light/80x53/${strtolower(str_replace(' ', '_',${software}))}.png" alt="${software}">
										</a>
									</:if>
									</:foreach>
								</div>
								<:set var="extraSoftwares" val="count(${result.softwares})-3"/>
								<:if test="${extraSoftwares} > 0">
								<div class="popup-spec">
									<span class="open-popup-spec">Show all (+${extraSoftwares})</span>
									<div class="popup-casino-spec big">
										<i class="icon-icon_unavailable close-popup-spec"></i>
										<div class="list_scroll">
											<:foreach var="${result.softwares}" key="key" val="software">
											<:if test="${key} > 3">
												<a class="list-title list_link item-spec software" href="/softwares/${normalize(${software})}">
													<img src="/public/sync/software_logo_light/80x53/${strtolower(str_replace(' ', '_',${software}))}.png" alt="${software}">
													${software}
												</a>
											</:if>
											</:foreach>
										</div>
									</div>
								</div>
								</:if>
							</div>
							<span class="spec-title">Banking</span>
							<div class="spec-row">
								<div class="spec-items">
									<:foreach var="${result.softwares}" key="key" val="software">
									<:if test="${key}<3">
										<a class="list-title list_link banking" href="/softwares/${normalize(${software})}">
											<img src="/public/sync/software_logo_light/80x53/${strtolower(str_replace(' ', '_',${software}))}.png" alt="${software}">
										</a>
									</:if>
									</:foreach>
								</div>
								<:set var="extraSoftwares" val="count(${result.softwares})-3"/>
								<:if test="${extraSoftwares} > 0">
								<div class="popup-spec">
									<span class="open-popup-spec">Show all (+${extraSoftwares})</span>
									<div class="popup-casino-spec large">
										<i class="icon-icon_unavailable close-popup-spec"></i>
										<div class="list_scroll">
											<div class="list-headings">
												<span>Method</span>
												<span>Deposit</span>
												<span>Withdrawal</span>
											</div>
											<:foreach var="${result.softwares}" key="key" val="software">
											<:if test="${key} > 3">
											<div class="list-item-spec">
												<a class="list-title list_link item-spec banking" href="/softwares/${normalize(${software})}">
													<img src="/public/sync/software_logo_light/80x53/${strtolower(str_replace(' ', '_',${software}))}.png" alt="${software}">
													${software}
												</a>
												<span><i class="icon-icon_unavailable"></i></span>
												<span><i class="icon-icon_available"></i></span>
											</div>
											</:if>
											</:foreach>
										</div>
									</div>
								</div>
								</:if>
							</div>
						</div>
					</div>
				</div>
				<:set var="i" val="${i}+1"/>
			</:foreach>

			<:unset var="i"/>
			<:unset var="result"/>
		</:if>
		
	</div>
</div>